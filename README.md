# 応用心理学Ⅰ「データ収集後探索的解析（テキストマイニング）」講義資料

## 概要

2019.07.13に島根大学人間科学部にて行われた「応用心理学Ⅰ：データ収集後探索的解析（テキストマイニング）」の講義資料です。

講義で使用したスライド、分析のデータよびソースコードを公開しています。



## ファイルについて

### ファイル一覧

+ slide.pdf
    + 講義で使用したスライド
+ Lecture1.ipynb / Lecture1.r
    + R操作の基礎
+ Lecture2.ipynb / Lecture2.r
    + 実習①：夏目漱石「夢十夜」の分析
+ Lecture3.ipynb / Lecture3.r
    + 実習②：夏目漱石『こころ』の分析

+ data/
    + 分析のデモに使ったデータセット
+ dict/
    + MeCab用追加辞書のサンプル
+ functions
    + 実習内で使った自作関数
+ README.md
    + このファイル

### 分析用コード

実習の３つのパートについてLecure1~Lecure3という名前のrファイル(.r)とipynbファイル(.ipynb)があります。

+ ipynbはJupyterLab(JupyterNotebook)で作成されたファイルで、GitHub上でソースコードとその実行結果をみることができます。
+ rファイルはRのソースコードで、より詳しいコードの解説と、ネットワークグラフ用のソースコードが入っています。一行ずつ実行していくことで、分析を再現できます

### ソースコードの実行について

1. GitHubからzipファイルをダウンロードする
1. zipファイルをを解凍する
1. Rを起動する
    + (RStudioで分析する場合)
        + RStudioでフォルダ内のrファイルを開く 
    + (R)で分析する場合
        + Rを起動する
1. 解凍したフォルダを作業フォルダに設定する
    + setwd(解凍先のフォルダのパス)を実行する。フォルダのパスは以下のいずれかの方法で取得することができる
        + アドレスバーを右クリックして「アドレスのコピー」を選択
        + フォルダを右クリック→プロパティ。表示される「場所」の内容をコピー
        + 好きなフォルダの配下(e.g. C:\\User\Documents)にフォルダを移動する
    + setwd()実行後、getwd()を実行して、うまくフォルダが設定されていることを確認する
1. ひとつずつコードを実行して確認する

### 分析データについて

実習には夏目漱石「夢十夜」および夏目漱石『こころ』本文を分析用に編集したものを用いた。

いずれもパブリックドメインの作品として青空文庫にて公開されているデータを用いた。



## RStudioについて

### コードの実行について

RStudioではsource上で「Ctrl+Enter」(Windowsの場合)を押下するとコードを実行することができます。挙動は、

+ コード選択時：選択されているコードを実行
+ コード非選択時：カーソルのある行を実行

で、実行結果はconsole内に表示されます。

RStudioを用いて分析を行う際は、コードの編集等の作業はsource上でを行うことを<u>**強く推奨します**</u>。

毎回コンソールに打ち込む方式ではコードの変更もいちいち面倒ですし、何らかの理由でRのセッションが再起動した際に内容がすべて失われ、コードの保存もおろそかになってしまいます。課題レポートでは<u>分析用のソースコードの提出が必須になっている</u>ことを忘れないでください。



### 不具合について

RStudioについて、何人かの受講生から不具合の連絡が来ています。

+ RStudioが起動せず、真っ白な画面のまま
+ plot系の関数を実行してもエラーが出て表示されない

この件について、<u>ユーザ名に全角文字が含まれている</u>場合にRStudioが不具合を起こすケースがあるようです。

もし解決策が見つかりましたらお知らせしますが、見つからなくても大丈夫なよう各自分析を進めてください（RStudioが動作しなくてもR上で分析は実行可能です）。



## 課題について


### ヒント

#### クリーニング

以下の事実に留意する

+ 残された時間で<u>すべてのデータを完璧にクリーニングすることは**不可能**である</u>
    + かろうじて１班分のデータぐらいなら人手でも可能かもしれない（試してみても構わない）
    + データが10倍、100倍あっても同じ方法をとるか（とりうるか）を考える
+ データの大部分は<u>分析と関係がない</u>
    + とはいえ事前にどこが重要か知るのも難しい
    + Zipfの法則/Paretoの法則を思い出す
+ データのクリーニングそのものは<u>本来の目的ではない</u>
    + あくまで分析が主目的であることを忘れない
    + 「無難なアプローチ」を思い出す


#### 前処理

##### 特定のデータを除外する

filter()を使ってそれ以外のものを抽出する

```R
library('dplyr')
ToothGrowth %>% filter(supp != 'OJ')  # supp列の値がOJではないものを抽出する
```

##### 括弧の中身を除外する

str_replace()を使う
```R
library('stringr')
text = 'この授業は「応用心理学Ⅰ：データ収集後探索的解析（テキストマイニング）」です'
text %>% str_replace('（[^）]*）', '') # 正規表現にマッチした部分を除去する
# [^）]* : 閉じ括弧以外の任意の文字の連続

```

## changes

+ 2019.07.17
    + 解説用Rコードを追加
    + READMEをアップデート
+ 2019.07.14 
    + スライドを追加
+ 2019.07.13
    + ipynbファイルを追加

